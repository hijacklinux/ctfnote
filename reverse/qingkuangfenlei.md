---
layout: default
---
# ![](../img/hj.jpg)容易遇到的情况的处理方案

## ![](../img/github18.png)修改按钮可视或变灰
#### 方法1
>小贱提示：
>
>修改按钮可视，内存搜索按钮名称，或者按钮标题，找单独按钮，一堆点的，

```
05表示可视=真，禁止=假
04表示可视=假，
07表示可视=真，禁止=真
08，06也是可视=假，禁止不知道，因为看不到
一般来说是按钮名称第四行（16个字节一行算）。
其他禁止什么的可以自己写个程序，来对比看偏移量是多少。
```
#### 方法2
```
API断点
EnableMenuItem:菜单变灰或禁止
EnableWindow:允许或禁止鼠标和键盘控制指定窗口和条目(禁止时菜单或按钮变灰)
```

#### 方法3
```
OD插件：api限制程序功能函数，全选下断确定
```
## ![](../img/github19.png)浏览器跳网址
>小贱提示：
>
>浏览器跳网址，下ShellExecuteA断点

## ![](../img/github20.png)易语言干掉时钟
#### 方法1
```
pchunter，运行程序
在要破程序上右键>查看>查看进程定时器
全部右键，移除
进入od，附加进程，e，双击程序领空，来到易语言体，
查找按钮事件ff 55 fc 5f 5e，每个都下断，f9,跑飞了就下面f2，去t，激活全部线程
```
#### 方法2
```
od，ff 25去E语言体，找时钟循环，ctr g 输入SetTimer，
找到时钟事件，定位到系统领空，看下面retn，将定位项修改为下面的retn
```
#### 方法3
```
ff55fc5f5e断下，f7跟进，段首改retn，f9，又断下了，
取消断点，下条件断点shift f2，
条件为（双击call，复制dword ptr xxx，条件就是 dword ptr xxx!=这个call后的注释，如 dword ptr ss:[ebp-4]!=0043AF75）
```
## ![](../img/github21.png)去除花指令
```
peid插件通用oep查找工具或通用脱壳机，od直接去oep下硬件执行断点，走脱壳程序，
（这种方法也可用于脱壳），
od载入脱后程序，查找ff 55 fc 5f 5e这是易语言按钮事件，下断，寻找下一个，下断，f9，直到成功，
遇到花指令插件 e junk code，size为999，执行清除，f8，看大跳转，
```
## ![](../img/github22.png)读配置文件
```
遇到读取配置文件的：
情况1：APi断点>ReadFile
情况2：针对ini
GetPrivateProfileStringA下断，f9，alt f9
```
## ![](../img/github23.png)自校验
```
脱壳后有的文件会自校验大小：
设置api断点 GetfileSize，f9看堆栈反汇编跟随，用户领空下断
```
## ![](../img/github24.png)次数校验
```
注册表或者：
第一步把程序领空跳转全部备注y/n
第二步运行到次数为0，对比看哪个跳转变动
```
## ![](../img/github25.png)去掉Nag
#### 方法1
```
exescope或resource hacker查看函数handle instance例如：100
然后od查找命令 push 0x64 (16进制100)
```
#### 方法2
```
od载入一步步跟到nag出现
```
#### 方法3
>小贱提示：
>
>4c法去除vb的nag

```
每个vb都是push 地址开头，在数据中搜 （地址+0x4c），存储的是另一个地址2，去地址2上，第24（十进制的36）个字节是顺序标志，将上下两块顺序颠倒
```
## ![](../img/github26.png)注册表
>小贱提示：
>
>注册表也可以下api关闭注册表断点，反复f9堆栈找software。
>
>找不到就运行，regedit，第三项，software看看存什么，注册，再看看存什么，
>
>还是没有就可能要注册成功提示后写入注册表，想办法自慰提示成功，就写进去了。
>
>然后下api regcreatkey断点，两种编码都下。读了假码，就一定会和真码对比

#### 注册表其他下断方法
```
方法1：直接搜software
方法2：查看模块间调用，找reg
```
## ![](../img/github27.png)下标数组越界
>小贱提示：
>
>解决数组成员引用下超出定义范围暗桩的特征码:
>
>55 8B EC 8B 45 08 50 8B 4D 08 8B ?? ?? ?? ?? ?? ?? 52 B9 ?? ?? ?? ?? E8 ?? ?? ?? ?? 5D C3段首retn

## ![](../img/github28.png)附加就蓝屏

#### 方法1
```
有的软件附加就会蓝屏重启!我的OD  F9也运行不起来。
只能用到上次发的那个教程的挂起线程咯！
先打开要破解的软件，任务管理器---性能—资源监视器，点进去。
找到辅助的名字挂起，我已经挂起好了！现在直接OD附加吧！
必须挂起线程才能附加，不然就蓝屏重启。
```
#### 方法2
```
简单点，pchunter，暂停进程运行，od附加
```

## ![](../img/github1.png)f2崩溃
>小贱提示：
>
>f2崩溃的话就下内存或硬件断点

## ![](../img/github2.png)一切换就暂停
>小贱提示：
>
>方法一：干掉时钟
>
>方法二：见条件断点

## ![](../img/github3.png)向上翻代码改变
>小贱提示：
>
>向上翻就变回去了，原因：
>
>中间那段根本不是代码也不是花指令，而是字符串。
>
>数据与代码的混合使反汇编出现无意义代码。00其实是字符串的结尾。
>
>LoadLibrary的参数是指向字符串的指针，而那个返回值就指向字符串的首地址。所有的都解释得通了。


```
举个例子，ida中使用快捷键可以把代码解析成字符串
在IDA中修正后的代码：
DATA:00402E28                 call    loc_402E36
DATA:00402E28 ; ---------------------------------------------------------------------------
DATA:00402E2D aAdvapi32       db 'advapi32',0
DATA:00402E36 ; ---------------------------------------------------------------------------
DATA:00402E36
DATA:00402E36 loc_402E36:                   ; CODE XREF: DATA:00402E28 p
DATA:00402E36                 call    dword ptr [ebp-0EDFh]
DATA:00402E3C                 mov     [ebp-4A9h], eax
```






__原创文章，转载请注明转载自[http://www.8pwn.com](http://www.8pwn.com)__

[返回上一层](./reverse)
